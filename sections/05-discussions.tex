\chapter{Discussions}

\section{Discussions}
\label{sec:discussions}

In this section we discuss the results aiming at answering the research questions. 

\subsection{\textbf{RQ1}: \textit{Do an aided approach of code smell detection - using a tree classifier representation â€“ influence on agreement among developers}?}
Based on the results obtained in the experiments conducted to respond to RQ1, considering the total number of participants involved, there is evidence that code smells detection aided by a decision tree leads to a relative improvement of agreement in relation to code smell detection based solely on pure and simple code analysis, although in both scenarios the resulting Kappa measure was considered slight regarding the agreement strength scale shown in Table \ref{tbl:agreementClassification}. However, this low agreement (less than 0.1) agrees with past publications \cite{hozano2018you} when it was stated that by default the agreement between developers is predominantly low, regardless of the analyzed smell.

Soon after, we segregated the total number of participants to investigate the agreement considering different experiences and backgrounds. In this case, 4 different types of user profiles were analyzed, including participants originating from the academy, experienced participants in code smell detection, experienced in java language and experienced in development. Considering the average agreement obtained in each profile, the inspection of code aided by decision tree favored the agreement for all user profiles except for the profile of experienced participants in the Java language. However, considering each group of tasks individually, even for the profiles in which the decision tree favored the agreement, the agreement of the \textit{DT} scenario did not take advantage over the \textit{No DT} in all comparisons.

The profiles of participants that stood out were the participants experienced in code smell detection and those experienced in Java language. The resulting agreement obtained by both exceeded the agreement considering all participants (overall agreement), both for the scenario with decision tree (\textit{DT}) and for the scenario without decision tree (\textit{No DT}). Nevertheless, the \textit{DT} scenario was more relevant on the agreement for the most experienced participants in code smell detection, i. e., the analysis of the metric-based rules in the decision tree favored the agreement for such type of participant.

\subsection{\textbf{RQ2}: \textit{How much effort do developer spend during code smell detection with a tree classifier support?}}

In relation to RQ2, the detection of code smell aided by decision tree did not decrease in time compared to detection based only on code inspection. For both groups of tasks, there isn't any evidence that indicates the benefits related to the effort reduction when detecting code smells with decision tree, i. e., the time spent to detect smells with decision tree tend to be equivalent or to overcome the time spent to detect code smells based only on code analysis. This result can be considered a non-fortuitous case, given that the participant had to observe other screen elements during task evaluation to obtain more information on the metrics presented, as is the case of the metrics glossary presented in the environment represented in Figure \ref{fig:taskEnvironmentDT}. In addition, as discussed in section \ref{sec:usefulnessDecisionTree}, for a good portion of the open answers given concerned to the decision tree contribution for the task accomplishment, many generated models were endowed with inappropriate information, the rules contained in the tree did not exactly match the smell presented, essential information regarding the smell was omitted and the bad understanding of the metrics presented by certain models. These are evidence that made the experience of viewing the decision tree costly from an effort perspective.

\subsection{\textbf{RQ3}: \textit{How useful is the decision tree visualization for decision making?}}

Regarding RQ3, our experiment suggests that the decision trees used to support code smell detection are useful to the developer. About 63\% of the participants, who completed the experiment and had their responses analyzed, considered the decision trees useful for supporting smell detection. From this percentage, about 85\% opined that the information provided by the presented software metrics was important for decision making. On the other hand, 37\% of the participants considered that the decision trees were not useful for decision making and, from this percentage, the majority considered that the presented decision tree mismatch the code smell under evaluation. The classification models that represent the detection rules of a God Class and a Long method were the best-evaluated models in terms of usefulness, i. e., models that offered good contributions to decision making. On the other hand, the models that represented the Long Parameter List and the Refused Bequest performed worse in terms of usefulness.

From these findings, for future works, we are going to consider reviewing the independent variables used for training the classification algorithms in order to generate models more refined to the chosen types of code smells, since the main complaints of the participants is related to useless information that is presented by the decision tree, the difficulty of understanding the metrics used and the lack of essential information related to the smell under evaluation.